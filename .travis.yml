language: python
cache: pip
dist: xenial
matrix:
  include:
    - os: linux
      python: "2.7"
      dist: trusty
      env: UAMQP_ENV=LINUX27
    - os: linux
      python: "3.4"
      dist: trusty
      env: UAMQP_ENV=LINUX34
    - os: linux
      python: "3.5"
      env: UAMQP_ENV=LINUX35
    - os: linux
      python: "3.6"
      env: UAMQP_ENV=LINUX36
    - os: linux
      python: "3.7"
      env: UAMQP_ENV=LINUX37
# command to install dependencies
sudo: required
services:
  - docker
install:
  - pip install -r dev_requirements.txt
  - python ./setup.py build_ext --inplace
  - pip install -e .
script: 
  - pytest
  - python ./setup.py check -r -s
  - pylint --extension-pkg-whitelist=uamqp.c_uamqp uamqp
